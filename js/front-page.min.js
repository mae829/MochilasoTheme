!function(a){var d=google.maps,r=new d.Geocoder,p={},s=0,l={init:function(o){for(var n in p=a.extend({},a.fn.gMap.defaults,o),a.fn.gMap.defaults.icon)p.icon[n]||(p.icon[n]=a.fn.gMap.defaults.icon[n]);return this.each(function(){var o=a(this),n=l._getMapCenter.apply(o,[]),e={zoom:p.zoom,center:n,mapTypeControl:p.mapTypeControl,zoomControl:p.zoomControl,panControl:p.panControl,scaleControl:p.scaleControl,streetViewControl:p.streetViewControl,mapTypeId:p.maptype,scrollwheel:p.scrollwheel};p.log&&console.log("map center is:"),p.log&&console.log(n);var i=new d.Map(this,e);if(o.data("$gmap",i),o.data("gmap",{opts:p,gmap:i,markers:[],infoWindow:null}),0!==p.controls.length)for(var t=0;t<p.controls.length;t+=1)i.controls[p.controls[t].pos].push(p.controls[t].div);if(0!==p.markers.length)for(t=0;t<p.markers.length;t+=1)l.addMarker.apply(o,[p.markers[t]]);l._onComplete.apply(o,[])})},_onComplete:function(){var o=this.data("gmap"),n=this;0===s?o.opts.onComplete():window.setTimeout(function(){l._onComplete.apply(n,[])},1e3)},_setMapCenter:function(o){p.log&&console.log("delayed setMapCenter called");var n=this.data("gmap");if(void 0!==n.gmap)n.gmap.setCenter(o);else{var e=this;window.setTimeout(function(){l._setMapCenter.apply(e,[o])},500)}},_getMapCenter:function(){var o,e=this;if(p.latitude&&p.longitude)return o=new d.LatLng(p.latitude,p.longitude);if(o=new d.LatLng(0,0),p.address)return r.geocode({address:p.address},function(o,n){n===google.maps.GeocoderStatus.OK?l._setMapCenter.apply(e,[o[0].geometry.location]):p.log&&console.log("Geocode was not successful for the following reason: "+n)}),o;if(a.isArray(p.markers)&&0<p.markers.length){for(var n=null,i=0;i<p.markers.length;i+=1){if(p.markers[i].latitude&&p.markers[i].longitude){n=p.markers[i];break}p.markers[i].address&&(n=p.markers[i])}if(null===n)return o;if(n.latitude&&n.longitude)return new d.LatLng(n.latitude,n.longitude);n.address&&r.geocode({address:n.address},function(o,n){n===google.maps.GeocoderStatus.OK?l._setMapCenter.apply(e,[o[0].geometry.location]):p.log&&console.log("Geocode was not successful for the following reason: "+n)})}return o},processMarker:function(o,n,e,i){var t=this.data("gmap"),a=t.gmap;if(void 0===i&&(i=new d.LatLng(o.latitude,o.longitude)),!n){var r={image:p.icon.image,iconSize:new d.Size(p.icon.iconsize[0],p.icon.iconsize[1]),iconAnchor:new d.Point(p.icon.iconanchor[0],p.icon.iconanchor[1]),infoWindowAnchor:new d.Size(p.icon.infowindowanchor[0],p.icon.infowindowanchor[1])};n=new d.MarkerImage(r.image,r.iconSize,null,r.iconAnchor)}if(!e)p.icon.shadow,new d.Size(p.icon.shadowsize[0],p.icon.shadowsize[1]),r&&r.iconAnchor?r.iconAnchor:new d.Point(p.icon.iconanchor[0],p.icon.iconanchor[1]);var s,l=new d.Marker({position:i,icon:n,title:o.title,map:a});if(l.setShadow(e),t.markers.push(l),o.html){var c={content:p.html_prepend+o.html+p.html_append,pixelOffset:o.infoWindowAnchor};p.log&&console.log("setup popup with data"),p.log&&console.log(c),s=new d.InfoWindow(c),d.event.addListener(l,"click",function(){p.log&&console.log("opening popup "+o.html),p.singleInfoWindow&&t.infoWindow&&t.infoWindow.close(),s.open(a,l),t.infoWindow=s})}o.html&&o.popup&&(p.log&&console.log("opening popup "+o.html),s.open(a,l))},_geocodeMarker:function(e,i,t){s+=1;var a=this;r.geocode({address:e.address},function(o,n){s-=1,n===d.GeocoderStatus.OK?l.processMarker.apply(a,[e,i,t,o[0].geometry.location]):p.log&&console.log("Geocode was not successful for the following reason: "+n)})},addMarker:function(o){p.log&&console.log("putting marker at "+o.latitude+", "+o.longitude+" with address "+o.address+" and html "+o.html);var n={image:p.icon.image,iconSize:new d.Size(p.icon.iconsize[0],p.icon.iconsize[1]),iconAnchor:new d.Point(p.icon.iconanchor[0],p.icon.iconanchor[1]),infoWindowAnchor:new d.Size(p.icon.infowindowanchor[0],p.icon.infowindowanchor[1])},e={image:p.icon.shadow,iconSize:new d.Size(p.icon.shadowsize[0],p.icon.shadowsize[1]),anchor:n.iconAnchor};o.infoWindowAnchor=n.infoWindowAnchor,o.icon&&(o.icon.image&&(n.image=o.icon.image),o.icon.iconsize&&(n.iconSize=new d.Size(o.icon.iconsize[0],o.icon.iconsize[1])),o.icon.iconanchor&&(n.iconAnchor=new d.Point(o.icon.iconanchor[0],o.icon.iconanchor[1])),o.icon.infowindowanchor&&(n.infoWindowAnchor=new d.Size(o.icon.infowindowanchor[0],o.icon.infowindowanchor[1])),o.icon.shadow&&(e.image=o.icon.shadow),o.icon.shadowsize&&(e.iconSize=new d.Size(o.icon.shadowsize[0],o.icon.shadowsize[1])));var i=new d.MarkerImage(n.image,n.iconSize,null,n.iconAnchor),t=new d.MarkerImage(e.image,e.iconSize,null,e.anchor);if(o.address)"_address"===o.html&&(o.html=o.address),"_address"==o.title&&(o.title=o.address),p.log&&console.log("geocoding marker: "+o.address),l._geocodeMarker.apply(this,[o,i,t]);else{"_latlng"===o.html&&(o.html=o.latitude+", "+o.longitude),"_latlng"==o.title&&(o.title=o.latitude+", "+o.longitude);var a=new d.LatLng(o.latitude,o.longitude);l.processMarker.apply(this,[o,i,t,a])}},removeAllMarkers:function(){var o,n=this.data("gmap").markers;for(o=0;o<n.length;o+=1)n[o].setMap(null);n=[]}};a.fn.gMap=function(o){return l[o]?l[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void a.error("Method "+o+" does not exist on jQuery.gmap"):l.init.apply(this,arguments)},a.fn.gMap.defaults={log:!1,address:"",latitude:null,longitude:null,zoom:3,markers:[],controls:{},scrollwheel:!0,maptype:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,zoomControl:!0,panControl:!1,scaleControl:!1,streetViewControl:!0,singleInfoWindow:!0,html_prepend:'<div class="gmap_marker">',html_append:"</div>",icon:{image:"http://www.google.com/mapfiles/marker.png",iconsize:[20,34],iconanchor:[9,34],infowindowanchor:[9,2],shadow:"http://www.google.com/mapfiles/shadow50.png",shadowsize:[37,34]},onComplete:function(){}}}(jQuery),$(function(){$(".no-js").hide(),$("body.home #post-listing").hide(),$("#map-holder").show();var g=$theme_location+"/images/yellow_pin.png",n=$(".coordinates"),h=[],e=$(".location"),m=[];n.each(function(o){n[o]=$(this).text()}),e.each(function(o){e[o]=$(this).text()}),n=$.grep(n,function(o){return o}),$.each(n,function(o,n){n=(n=n.substring(1)).substring(0,n.length-1),-1===$.inArray(n,h)&&h.push(n)}),e=$.grep(e,function(o){return o}),$.each(e,function(o,n){-1===$.inArray(n,m)&&m.push(n)}),function(){var i,o=0,n=[],e={center:new google.maps.LatLng(-25,-60),zoom:3,mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(document.getElementById("map"),e),a=h.length;for(o=0;o<a;o++){var r=h[o].split(","),s=r[0],l=r[1],c=new google.maps.LatLng(s,l),d={};n[o]=c,d.title=m[o],p(d.title,c)}function p(o,n){var e=new google.maps.Marker({position:n,map:t,icon:g});(i=new google.maps.InfoWindow).setOptions({maxWidth:150}),google.maps.event.addListener(e,"click",function(){i&&i.close(),i.setContent(o),i.open(t,e)})}new google.maps.Polyline({path:n,strokeColor:"#D36C00",strokeOpacity:.8,strokeWeight:2}).setMap(t)}()}),google.maps.Map.prototype.addMarker=function(o){this.markers[this.markers.length]=o};
//# sourceMappingURL=front-page.min.js.map
